<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.platform.modules.qkjvip.dao.QkjvipMemberOrderDao">

    <sql id="selectSql">
        SELECT
        T.ID,
        T.ORDERID,
        T.PRODUCTNAME,
        T.SALEPRICE,
        T.QUANTITY,
        T.REALTOTALPRICE,
        T.ORDERDATE,
        T.CELLPHONE,
        T.BUYERTYPE,
        T.SHOPNAME,
        T.SHOPPROVINCENAME,
        T.SHOPCITYNAME,
        T.ORDERSTATUS,
        T.GIVEAWAY
        FROM QKJVIP_MEMBER_ORDER T
        WHERE 1=1
        <if test="params.name != null and params.name.trim() != ''">
            AND T.NAME LIKE '%${params.name}%'
        </if>
    </sql>

    <select id="selectQkjvipMemberOrderPage" resultType="com.platform.modules.qkjvip.entity.QkjvipMemberOrderEntity">
        <include refid="selectSql"/>
    </select>

    <select id="queryAll" resultType="com.platform.modules.qkjvip.entity.QkjvipMemberOrderEntity">
        <include refid="selectSql"/>
    </select>

    <select id="queryOrderIdList" resultType="com.platform.modules.qkjvip.entity.MemberBasicEntity">
        SELECT OrderId FROM QKJVIP_MEMBER_ORDER
        WHERE OrderId in
        <foreach collection="mbList" item="item" open="(" close=")" separator=",">
            #{item.OrderId}
        </foreach>
    </select>

    <update id="updateBatchByOrderyId" parameterType="java.util.List">
        <foreach collection="list" item="item" index="index" open="" close="" separator=";">
            update qkjvip_member_order
            <set>
                ProductName=#{item.ProductName},
                SalePrice=#{item.SalePrice},
                Quantity=#{item.Quantity},
                RealTotalPrice=#{item.RealTotalPrice},
                orderdate=#{item.orderdate},
                CellPhone=#{item.CellPhone},
                ShopName=#{item.ShopName},
                ShopProvinceName=#{item.ShopProvinceName},
                ShopCityName=#{item.ShopCityName},
                OrderStatus=#{item.OrderStatus},
                Giveaway=#{item.Giveaway}
            </set>
            where OrderId=#{item.OrderId}
        </foreach>
    </update>
</mapper>